<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="./product_data.js"></script>. 
</head>

<body>
    <script>
let params = (new URL(document.location)).searchParams;
GET = {};
params.forEach(function (value, key) { GET[key] = value });

function CheckisNonNegIntString
/* This function returns true string_to_check is a non-negative integer. 
*/
(string_to_check, returnErrors=false) {
    errors = []; // assume no errors at first
    if(Number(string_to_check) != string_to_check) errors.push('Not a number!');
    } // Check if string is a number value
    if(string_to_check < 0) errors.push('Negative value!'); // Check if it is non-negative
        if(parseInt(string_to_check) != string_to_check) errors.push('Not an integer!');// Check that it is an integer
    return returnErrors ? errors : (errors.length == 0);
attributes = "Natalie;20;20.5;" +(0.5 - 20)
pieces = attributes.split(";")
function callback (part, i) {
    console.log (`${part} is non neg int ${isNonNegInt(part, true).join("***")}`);
}
pieces.forEach(function (item, i)
{
    console.log( (typeof item == 'string' && item.length > 0)?true:false )});

    function checkQuantityTextbox(theTextbox) {
            errs = isNonNegInt(theTextbox.value, true);
            document.getElementById(theTextbox.name + '_message').innerHTML = errs.join(", ");
        }

function displayPurchases() {
    userInput = quantity_textbox.value;
    if (isNonNegInt(userInput)) {
        document.write(`Thank you for purchasing ${userInput} awesome things!`);
    
    }
}
</script>
<form name='quantity_form' action="http://localhost:8080/process_form" method="POST">
    <script>
    for (i in products) {
        document.write(`<h3>${products[i]["model"]} at \$${products[i]["price"]}</h3>`);
        document.write(`
        <label for="quantity_textbox">quantity desired:</label>
        <input type="text" name="quantity_textbox${i}" onkeyup="checkQuantityTextbox(this);">
        <span id="quantity_textbox${i}_message">Enter a quantity</span>
        `);
            }
        </script>
        <br>
        <input type="submit" value='Purchase' name="purchase_submit_button">
    </form>
</body>